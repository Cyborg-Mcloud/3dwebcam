<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>3D Webcam</title>

        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />

	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	<script type="text/javascript" charset="utf-8" src="metawear.js"></script>

  </head>
  <style>
	body {color:white; margin:0px; padding:0px;}
	a {text-decoration:none; color:white;}
  </style>
  <body style='padding:0; border:0; margin:0;'>
  <Table>
  <tr><td>
                <button id="disconnectButton">Disconnect</button>
                <button id="connectButton">Connect</button>

  <h3>Colors</h3>
		<button id="ledButtonred">LEDred</button><br />
	<button id="ledButtongreen">LEDgreen</button><br />
	<button id="ledButtonblue">LEDblue</button>
	<br /><br />
	<button id="playledButton">Play LEDblue</button>
	<br /><br />
	<button id="pauseledButton">Pause LEDblue</button>
	<br /><br />
	<button id="stopledButton">Stop LEDblue</button>
</td>
<td>


<div id='infodiv'></div>

</td>
</tr></table>

<script>


function onConnSucc(res)
{
 connectButton.style.display = "none";
         console.log('Meta connected! ' + JSON.stringify(res));
         //listen for the button on the metawear
        metawear.listenForButton(onMyError);
		metawear.startAccelerometer();
}

function onMyError(res)
{
 console.log(' generic error handler: ' + JSON.stringify(res));
}

var curSID="1800";
var curPROP="2a00";


/*http://phonegap-plugins.com/plugins/ldeluca/cordova-plugin-metawear*/
 document.addEventListener('deviceready', onDeviceReady, false);
 document.addEventListener("pause", onDevicePause, false);

function DisconSucc()
	{
	console.log("stopped");
	}	

function DisconnFailure()
	{
	console.log("stop error");
	}

function onDevicePause(event)
	{
metawear.disconnect(DisconSucc,DisconnFailure,event);

	}

function onDeviceReady()
	{
        //bind events that need to wait for Cordova to be ready

    
	disconnectButton.addEventListener('touchstart', onDevicePause, false);
    connectButton.addEventListener('touchstart', metawearStart, false);
        
    ledButtonred.addEventListener('touchstart', function(){		 metawear.startAccelerometer(); }, false);
    ledButtongreen.addEventListener('touchstart', function(){metawear.setLED(metawear.COLOR.GREEN); }, false);
    ledButtonblue.addEventListener('touchstart', function(){metawear.setLED(metawear.COLOR.BLUE); }, false);
        
    playledButton.addEventListener('touchstart', function(){ metawear.play(true); }, false);
	pauseledButton.addEventListener('touchstart', metawear.pause, false);
    stopledButton.addEventListener('touchstart', function(){ metawear.stop(true); }, false);
        
       
    metawearStart();
    }



function metawearStart() {
    console.log('metawearStart');

    metawear.init(onConnSucc, onMyError);

}

</script>

</body>



</html>
